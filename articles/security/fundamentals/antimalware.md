---
title: Microsoft Antimalware für Azure | Microsoft-Dokumentation
description: Erfahren Sie mehr über Microsoft Antimalware für Azure Cloud Services und Virtual Machines. Hier finden Sie Informationen zu Themen wie Architektur und Bereitstellungsszenarien.
services: security
documentationcenter: na
author: terrylanfear
manager: rkarlin
ms.assetid: 265683c8-30d7-4f2b-b66c-5082a18f7a8b
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/05/2021
ms.author: terrylan
ms.openlocfilehash: 8b35832677afcfac3b6ef03848f6608ff9c76429
ms.sourcegitcommit: 59cfed657839f41c36ccdf7dc2bee4535c920dd4
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/06/2021
ms.locfileid: "99625497"
---
# <a name="microsoft-antimalware-for-azure-cloud-services-and-virtual-machines"></a>Microsoft Antimalware für Azure Cloud Services und Virtual Machines

Microsoft Antimalware für Azure ist eine kostenlose Echtzeit-Schutzfunktion zum Erkennen und Entfernen von Viren, Spyware und anderer Schadsoftware. Das Tool generiert Warnungen, wenn bekannte schädliche oder unerwünschte Software versucht, sich selbst auf Ihren Azure-Systemen zu installieren oder dort auszuführen.

Die Lösung baut auf derselben Antischadsoftwareplattform wie Microsoft Security Essentials \[MSE\], Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Microsoft Intune und Microsoft Defender auf. Microsoft Antimalware für Azure ist eine Lösung mit einem einzelnen Agent für Anwendungen und Mandantenumgebungen, die im Hintergrund ohne Eingreifen des Benutzers ausgeführt wird. Der Schutz kann basierend auf den Anforderungen der Anwendungsworkloads bereitgestellt werden – entweder mit der einfachen Konfiguration, die Schutz durch die Standardeinstellungen bietet, oder mit einer erweiterten benutzerdefinierten Konfiguration, einschließlich Antischadsoftwareüberwachung.

Wenn Sie Microsoft Antimalware für Azure für Ihre Anwendungen bereitstellen und aktivieren, sind die folgenden Kernfunktionen verfügbar:

* **Echtzeitschutz** – Überwacht die Aktivitäten in Clouddiensten und auf virtuellen Computern, um die Ausführung von Malware zu erkennen und zu blockieren.
* **Geplantes Scannen:** führt regelmäßig Scans aus, um Schadsoftware, einschließlich aktiv ausgeführter Programme, zu erkennen.
* **Schadsoftwarebehandlung** – Führt automatisch Aktionen für erkannte Malware aus, z.B. das Löschen schädlicher Dateien, das Unter-Quarantäne-Stellen schädlicher Dateien und das Bereinigen von schädlichen Registrierungseinträgen.
* **Signaturaktualisierungen** – Installiert automatisch mit einer vordefinierten Häufigkeit die neuesten Schutzsignaturen (Virendefinitionen), um sicherzustellen, dass der Schutz auf dem neuesten Stand ist.
* **Aktualisierungen der Antischadsoftware-Engine** – Aktualisiert automatisch die Microsoft-Antischadsoftware-Engine.
* **Aktualisierungen der Antimalware-Plattform** – Aktualisiert automatisch die Microsoft Antimalware-Plattform.
* **Aktiver Schutz** – Übermittelt Telemetriemetadaten über erkannte Bedrohungen und verdächtige Ressourcen an Microsoft Azure, um eine schnelle Reaktion auf die zunehmenden Bedrohungen sicherzustellen und eine synchrone Echtzeitübermittlung von Signaturen über MAPS (Microsoft Active Protection Service) zu ermöglichen.
* **Übermittlung von Stichproben** – Übermittelt Stichproben an den Microsoft Antimalware-Dienst, um den Dienst zu optimieren und die Problembehandlung zu ermöglichen.
* **Ausschlüsse:** ermöglicht Anwendungs- und Dienstadministratoren das Konfigurieren von Ausschlüssen für Dateien, Prozesse und Laufwerke.  
* **Antimalware-Ereigniserfassung** – Zeichnet die Integrität des Antimalware-Diensts, verdächtige Aktivitäten und durchgeführte Wiederherstellungsaktionen im Ereignisprotokoll des Betriebssystems auf und erfasst sie im Azure Storage-Konto des Kunden.

> [!NOTE]
> Microsoft Antimalware kann auch über das Azure Security Center bereitgestellt werden. Weitere Informationen erhalten Sie unter [Installieren von Endpoint Protection in Azure Security Center](../../security-center/security-center-services.md#supported-endpoint-protection-solutions-).

## <a name="architecture"></a>Aufbau

Microsoft Antimalware für Azure umfasst den Microsoft Antimalware-Client und -Dienst, das klassische Antimalware-Bereitstellungsmodell, Antimalware-PowerShell-Cmdlets und die Azure-Diagnoseerweiterung. Microsoft Antimalware wird unter den Betriebssystemen Windows Server 2008 R2, Windows Server 2012 und Windows Server 2012 R2 unterstützt. Sie wird nicht unter Windows Server 2008 oder Linux unterstützt.

Der Microsoft Antimalware-Client und -Dienst wird standardmäßig unter allen Azure-Gastbetriebssystemen und auf der Cloud Services-Plattform in deaktiviertem Zustand installiert. Der Microsoft Antimalware-Client und -Dienst ist nicht standardmäßig auf der Virtual Machines-Plattform installiert. Er ist über das Azure-Portal und über die Konfiguration virtueller Computer in Visual Studio unter „Sicherheitserweiterungen“ als optionales Feature verfügbar.

Bei Verwendung von Azure App Service unter Windows ist in dem zugrunde liegenden Dienst, der die Web-App hostet, Microsoft Antimalware aktiviert. Dies dient dem Schutz der Azure App Service-Infrastruktur und wird nicht für Kundeninhalte ausgeführt.

> [!NOTE]
> Microsoft Defender ist die aktivierte integrierte Antischadsoftware unter Windows Server 2016. Die Microsoft Defender-Schnittstelle ist standardmäßig auch unter einigen Windows Server 2016-SKUs aktiviert. Weitere Informationen finden Sie [hier](/windows/threat-protection/windows-defender-antivirus/windows-defender-antivirus-on-windows-server-2016). Virtuelle Azure-Computer mit Microsoft Defender unter Windows Server 2016 können weiterhin mit der Antischadsoftwareerweiterung für virtuelle Azure-Computer versehen werden. In diesem Szenario wendet die Erweiterung allerdings sämtliche optionale [Konfigurationsrichtlinien](https://gallery.technet.microsoft.com/Antimalware-For-Azure-5ce70efe) für die Verwendung durch Microsoft Defender an. Die Erweiterung stellt keinerlei zusätzliche Antischadsoftwaredienste bereit.
> Weitere Informationen zu diesem Update finden Sie [hier](/archive/blogs/azuresecurity/update-to-azure-antimalware-extension-for-cloud-services).

### <a name="microsoft-antimalware-workflow"></a>Microsoft Antimalware-Workflow

Der Azure-Dienstadministrator kann Antimalware für Azure unter Verwendung der folgenden Optionen mit einer Standardkonfiguration oder benutzerdefinierten Konfiguration für Virtual Machines und Cloud Services konfigurieren:

* Virtual Machines – im Azure-Portal unter **Sicherheitserweiterungen**
* Virtual Machines – In Visual Studio mit der Konfiguration virtueller Computer im Server-Explorer
* Virtual Machines und Cloud Services – Verwendung des [klassischen Bereitstellungsmodells](/previous-versions/azure/ee460799(v=azure.100)) für Antimalware
* Virtual Machines und Cloud Services – Mit den Antimalware-PowerShell-Cmdlets

Das Azure-Portal oder die PowerShell-Cmdlets übertragen die Antimalware-Erweiterungspaketdatei per Push an einen vordefinierten festen Speicherort im Azure-System. Der Azure-Gast-Agent (oder der Fabric-Agent) startet die Antimalware-Erweiterung und wendet die als Eingabe bereitgestellten Antimalware-Konfigurationseinstellungen an. Durch diesen Schritt wird der Antimalware-Dienst mit den Standard- oder benutzerdefinierten Konfigurationseinstellungen aktiviert. Wenn keine benutzerdefinierte Konfiguration bereitgestellt wurde, wird der Antimalware-Dienst mit den Standardkonfigurationseinstellungen aktiviert. Weitere Informationen finden Sie im Dokument [Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele](https://aka.ms/amazsamples "Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele") im Abschnitt *Antimalware-Konfiguration*.

Sobald der Microsoft-Antischadsoftware-Client ausgeführt wird, lädt er die neuesten Protection Engine- und Signaturdefinitionen aus dem Internet herunter und lädt sie in das Azure-System. Der Microsoft Antimalware-Dienst schreibt dienstbezogene Ereignisse unter der Ereignisquelle "Microsoft Antimalware" in das Systemereignisprotokoll des Betriebssystems. Zu solchen Ereignissen zählen der Integritätsstatus, Schutz- und Wiederherstellungsstatus des Antischadsoftwareclients, neue und alte Konfigurationseinstellungen, Engine-Aktualisierungen, Signaturdefinitionen und weitere Ereignisse.

Sie können die Antimalware-Überwachung für Ihren Clouddienst oder virtuellen Computer aktivieren, damit die Ereignisse des Antimalware-Ereignisprotokolls in Ihr Azure-Speicherkonto geschrieben werden, sobald sie erzeugt werden. Der Antimalware-Dienst erfasst mit der Erweiterung Azure-Diagnose Antimalware-Ereignisse aus dem Azure-System in Tabellen im Azure-Speicherkonto des Kunden.

Der Bereitstellungsworkflow, einschließlich Konfigurationsschritten und den für die oben genannten Szenarien unterstützten Optionen, wird im Abschnitt [Antimalware-Bereitstellungsszenarien](#antimalware-deployment-scenarios) dieses Dokuments beschrieben.

![Microsoft-Antischadsoftware in Azure](./media/antimalware/sec-azantimal-fig1.PNG)

> [!NOTE]
> Sie können jedoch Powershell/APIs und Azure Resource Manager-Vorlagen zum Bereitstellen von Skalierungsgruppen für virtuelle Computer mit der Antischadsoftware-Erweiterung von Microsoft verwenden.  Für die Installation einer Erweiterung auf einem bereits ausgeführten virtuellen Computer können Sie das Python-Beispielskript [vmssextn.py](https://github.com/gbowerman/vmsstools) verwenden. Dieses Skript ruft die vorhandene Erweiterungskonfiguration für die Skalierungsgruppe ab und fügt der Liste der vorhandenen Erweiterungen für VM Scale Sets eine Erweiterung hinzu.
>
>

### <a name="default-and-custom-antimalware-configuration"></a>Standardmäßige und benutzerdefinierte Antimalware-Konfiguration

Die Standardkonfigurationseinstellungen werden angewendet, um Antimalware für Azure Cloud Services oder Virtual Machines zu aktivieren, wenn Sie keine benutzerdefinierten Konfigurationseinstellungen angeben. Die Standardkonfigurationseinstellungen wurden bereits für die Ausführung in der Azure-Umgebung optimiert. Optional können Sie diese Standardkonfigurationseinstellungen nach Bedarf für Ihre Azure-Anwendung oder Dienstbereitstellung anpassen und sie für andere Bereitstellungsszenarien anwenden.

In der folgenden Tabelle sind die für den Antimalware-Dienst verfügbaren Konfigurationseinstellungen zusammengefasst. Die Standardkonfigurationseinstellungen sind in der Spalte „Standard“ aufgeführt.

![Tabelle 1](./media/antimalware/sec-azantimal-tb18.png)

## <a name="antimalware-deployment-scenarios"></a>Antimalware-Bereitstellungsszenarien

In diesem Abschnitt werden die Szenarien zum Aktivieren und Konfigurieren von Antimalware, einschließlich der Überwachung für Azure Cloud Services und Virtual Machines, erläutert.

### <a name="virtual-machines---enable-and-configure-antimalware"></a>Virtual Machines – Aktivieren und Konfigurieren von Antimalware

#### <a name="deployment-while-creating-a-vm-using-the-azure-portal"></a>Bereitstellung beim Erstellen eines virtuellen Computers über das Azure-Portal

Führen Sie die folgenden Schritte aus, um Microsoft Antimalware für Azure Virtual Machines über das Azure-Portal zu aktivieren und zu konfigurieren, während Sie einen virtuellen Computer bereitstellen:

1. Melden Sie sich unter <https://portal.azure.com> beim Azure-Portal an.
2. Um einen neuen virtuellen Computer zu erstellen, navigieren Sie zu **Virtuelle Computer** und wählen **Hinzufügen** und dann **Windows Server** aus.
3. Wählen Sie die Version von Windows Server aus, die Sie verwenden möchten.
4. Klicken Sie auf **Erstellen**.
    ![Virtuellen Computer erstellen](./media/antimalware/create-vm.PNG)
5. Geben Sie einen **Namen**, einen **Benutzernamen** und ein **Kennwort** an, und erstellen Sie eine neue Ressourcengruppe. Sie können auch eine vorhandene Ressourcengruppe verwenden.
6. Klicken Sie auf **OK**.
7. Wählen Sie eine VM-Größe aus.
8. Im nächsten Abschnitt nehmen Sie Anpassungen für Ihre Anforderungen vor. Wählen Sie den Abschnitt **Erweiterungen** aus.
9. Wählen Sie **Erweiterung hinzufügen** aus.
10. Wählen Sie unter **Neue Ressource** die Option **Microsoft Antimalware** aus.
11. Klicken Sie auf **Erstellen**
12. Im Abschnitt **Erweiterung installieren** können Sie Ausschlüsse für Dateien, Standorte und Prozesse sowie weitere Scanoptionen konfigurieren. Klicken Sie auf **OK**.
13. Klicken Sie auf **OK**.
14. Wählen Sie im Abschnitt **Einstellungen** die Option **OK** aus.
15. Wählen Sie auf dem Bildschirm **Erstellen** die Option **OK** aus.

Weitere Informationen zur Bereitstellung der Antimalware VM-Erweiterung für Windows finden Sie in dieser [Azure Resource Manager-Vorlage](https://github.com/Azure/azure-quickstart-templates/blob/master/anti-malware-extension-windows-vm/azuredeploy.json#L261).

#### <a name="deployment-using-the-visual-studio-virtual-machine-configuration"></a>Bereitstellung mit der Konfiguration eines virtuellen Computers in Visual Studio

Sie aktivieren und konfigurieren Sie den Microsoft Antimalware-Dienst mit Visual Studio:

1. Stellen Sie in Visual Studio eine Verbindung mit Microsoft Azure her.

2. Wählen Sie im **Server-Explorer** im Knoten **Virtuelle Computer** den virtuellen Computer aus.

   ![Konfiguration des virtuellen Computers in Visual Studio](./media/antimalware/sec-azantimal-fig5.PNG)

3. Klicken Sie mit der rechten Maustaste auf **Konfigurieren**, um die Seite für die Konfiguration des virtuellen Computers anzuzeigen.

4. Wählen Sie in der Dropdownliste unter **Installierte Erweiterungen** die Erweiterung **Microsoft Antimalware** aus, und klicken Sie auf **Hinzufügen**, um die Antimalware-Standardkonfiguration zu verwenden.
    ![Installierte Erweiterungen](./media/antimalware/sec-azantimal-fig6.PNG)
5. Um die Antimalware-Standardkonfiguration anzupassen, wählen (markieren) Sie in der Liste „Installierte Erweiterungen“ die Erweiterung „Microsoft Antimalware“ aus, und klicken Sie auf **Konfigurieren**.

6. Ersetzen Sie im Textfeld **Öffentliche Konfiguration** die Antimalware-Standardkonfiguration durch die benutzerdefinierte Konfiguration im unterstützten JSON-Format, und klicken Sie auf „OK“.

7. Klicken Sie auf die Schaltfläche **Aktualisieren**, um die Konfigurationsaktualisierungen auf den virtuellen Computer zu pushen.

    ![Erweiterung für die Konfiguration des virtuellen Computers](./media/antimalware/sec-azantimal-fig7.PNG)

> [!NOTE]
>Bei der Konfiguration virtueller Computer in Visual Studio für Antimalware wird nur das JSON-Format unterstützt. [Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele](https://aka.ms/amazsamples "Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele") enthält eine JSON-Vorlage für die Antimalware-Konfigurationseinstellungen mit Angabe der unterstützten Antimalware-Konfigurationseinstellungen.

#### <a name="deployment-using-powershell-cmdlets"></a>Bereitstellung mit PowerShell-Cmdlets

Eine Azure-Anwendung oder ein Azure-Dienst kann Microsoft Antimalware für Azure Virtual Machines mithilfe von PowerShell-Cmdlets aktivieren und konfigurieren.

So aktivieren und konfigurieren Sie Microsoft Antimalware mithilfe von Antimalware-PowerShell-Cmdlets:

1. Richten Sie die PowerShell-Umgebung ein – siehe Dokumentation unter <https://github.com/Azure/azure-powershell>.
2. Verwenden Sie zum Aktivieren und Konfigurieren von Microsoft Antimalware für Ihren virtuellen Computer das Cmdlet [Set-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/set-azurevmmicrosoftantimalwareextension).

> [!NOTE]
>Bei der Konfiguration von Azure Virtual Machines für Antimalware wird nur das JSON-Format unterstützt. [Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele](https://aka.ms/amazsamples "Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele") enthält eine JSON-Vorlage für die Antimalware-Konfigurationseinstellungen mit Angabe der unterstützten Antimalware-Konfigurationseinstellungen.

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets"></a>Aktivieren und Konfigurieren von Antimalware mithilfe von PowerShell-Cmdlets

Eine Azure-Anwendung oder ein Azure-Dienst kann Microsoft Antimalware für Azure Cloud Services mit PowerShell-Cmdlets aktivieren und konfigurieren. Beachten Sie, dass Microsoft Antimalware im deaktivierten Zustand auf der Cloud Services-Plattform installiert wird und durch eine Azure-Anwendung aktiviert werden muss.

So aktivieren und konfigurieren Sie Microsoft Antimalware mit PowerShell-Cmdlets:

1. Richten Sie die PowerShell-Umgebung ein – siehe Dokumentation unter <https://github.com/Azure/azure-powershell>.
2. Verwenden Sie zum Aktivieren und Konfigurieren von Microsoft Antimalware für Ihren Clouddienst das Cmdlet [Set-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/set-azureserviceextension).

[Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele](https://aka.ms/amazsamples "Microsoft Antimalware für Azure Cloud Services und VMs – Codebeispiele") enthält eine XML-Vorlage für die Antimalware-Konfigurationseinstellungen mit Angabe der unterstützten Antimalware-Konfigurationseinstellungen.

### <a name="cloud-services-and-virtual-machines---configuration-using-powershell-cmdlets"></a>Cloud Services und Virtual Machines – Konfiguration mithilfe von PowerShell-Cmdlets

Eine Azure-Anwendung oder ein Azure-Dienst kann die Microsoft Antimalware-Konfiguration für Cloud Services und Virtual Machines mithilfe von PowerShell-Cmdlets abrufen.

So rufen Sie die Microsoft Antimalware-Konfiguration mithilfe von PowerShell-Cmdlets ab:

1. Richten Sie die PowerShell-Umgebung ein – siehe Dokumentation unter <https://github.com/Azure/azure-powershell>.
2. **Für Virtual Machines:** Verwenden Sie zum Abrufen der Antimalware-Konfiguration das Cmdlet [Get-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/get-azurevmmicrosoftantimalwareextension).
3. **Für Cloud Services**: Verwenden Sie zum Abrufen der Antimalware-Konfiguration das Cmdlet [Get-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/get-azureserviceextension).

### <a name="remove-antimalware-configuration-using-powershell-cmdlets"></a>Entfernen der Antimalware-Konfiguration mithilfe von PowerShell-Cmdlets

Eine Azure-Anwendung oder ein Azure-Dienst kann die Antimalware-Konfiguration und die gesamte zugehörige Antimalware-Überwachungskonfiguration aus den relevanten Azure-Antimalware- und Diagnosediensterweiterungen für den Clouddienst oder virtuellen Computer entfernen.

So entfernen Sie Microsoft Antimalware mithilfe von PowerShell-Cmdlets:

1. Richten Sie die PowerShell-Umgebung ein – siehe Dokumentation unter <https://github.com/Azure/azure-powershell>.
2. **Für Virtual Machines:** Verwenden Sie das Cmdlet [Remove-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/remove-azurevmmicrosoftantimalwareextension).
3. **Für Cloud Services**: Verwenden Sie das Cmdlet [Remove-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/remove-azureserviceextension).

So **aktivieren** Sie die Antimalware-Ereigniserfassung für einen virtuellen Computer mithilfe des Azure-Vorschauportals:

1. Klicken Sie im Blatt "Virtueller Computer" auf einen beliebigen Teil des Fokus "Überwachung".
2. Klicken Sie im Blatt "Metrik" auf den Befehl "Diagnose".
3. Wählen Sie für **Status** „EIN“ aus, und aktivieren Sie die Option für das Windows-Ereignissystem.
4. . Sie können alle anderen Optionen in der Liste deaktivieren oder sie entsprechend den Anwendungsdienstanforderungen aktiviert lassen.
5. Die Antimalware-Ereigniskategorien "Fehler", "Warnung", "Information" usw. werden im Azure-Speicherkonto erfasst.

Antimalware-Ereignisse werden aus den Windows-Ereignissystemprotokollen in das Azure-Speicherkonto übertragen. Sie können das Speicherkonto für den virtuellen Computer zum Erfassen von Antimalware-Ereignissen konfigurieren, indem Sie das entsprechende Speicherkonto auswählen.

![Metriken und Diagnosen](./media/antimalware/sec-azantimal-fig8.PNG)

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets-for-azure-resource-manager-vms"></a>Aktivieren und Konfigurieren von Antimalware mithilfe von PowerShell-Cmdlets für Azure Resource Manager-VMs
Sie können Microsoft Antimalware für Azure Resource Manager-VMs mit PowerShell-Cmdlets aktivieren und konfigurieren.

So aktivieren und konfigurieren Sie Microsoft Antimalware mithilfe von Antimalware-PowerShell-Cmdlets:

1. Richten Sie die PowerShell-Umgebung anhand der Informationen in [dieser Dokumentation](https://github.com/Azure/azure-powershell) auf GitHub ein.
2. Verwenden Sie zum Aktivieren und Konfigurieren von Microsoft Antimalware für Ihre VM das Cmdlet [Set-AzureRmVMExtension](/powershell/module/azurerm.compute/set-azurermvmextension).

Folgende Codebeispiele sind verfügbar:

- [Bereitstellen von Microsoft Antimalware auf ARM-VMs](antimalware-code-samples.md#enable-and-configure-microsoft-antimalware-for-azure-resource-manager-vms)
- [Hinzufügen von Microsoft Antimalware zu Azure Service Fabric-Clustern](antimalware-code-samples.md#add-microsoft-antimalware-to-azure-service-fabric-clusters)

## <a name="next-steps"></a>Nächste Schritte
Informationen zum Aktivieren und Konfigurieren von Microsoft Antimalware für Azure Resource Manager-VMs (ARM) finden Sie in den [Codebeispielen](antimalware-code-samples.md).